<h1>Search Google Groups</h1>

<div class="google-groups-search">
  <div class="search-panel">

    <div class="panel-group">
      <div class="panel-field">
        <div class="panel-field-label">Admin Created</div>
        <div class="panel-field-control">
          <mat-radio-group name="adminCreated" aria-label="Admin Created" [formControl]="adminCreatedFilterFormControl">
            <mat-radio-button value="true">Yes</mat-radio-button>
            <mat-radio-button value="false">No</mat-radio-button>
            <mat-radio-button value="all">All</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

      <div class="panel-field">
        <div class="panel-field-label">Membership Automated</div>
        <div class="panel-field-control">
          <mat-radio-group name="automated" aria-label="Automated" [formControl]="membershipAutomatedFilterFormControl">
            <mat-radio-button value="true">Yes</mat-radio-button>
            <mat-radio-button value="false">No</mat-radio-button>
            <mat-radio-button value="all">All</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

      <div class="panel-field">
        <div class="panel-field-label">Messages visible to non-members</div>
        <div class="panel-field-control">
          <mat-radio-group name="open" aria-label="Open" [formControl]="isOpenFilterFormControl">
            <mat-radio-button value="true">Yes</mat-radio-button>
            <mat-radio-button value="false">No</mat-radio-button>
            <mat-radio-button value="all">All</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>
    </div>

    <div class="panel-group">
      <div class="panel-group-label">Search by:</div>
      <div class="panel-field">
        <mat-form-field class="input-full-width" floatLabel="never">
          <mat-label>Name or email</mat-label>
          <input matInput type="text" [formControl]="groupNameEmailSearchFormControl">
          <button mat-button *ngIf="groupNameEmailSearchFormControl.value" matSuffix mat-icon-button aria-label="Clear" (click)="groupNameEmailSearchFormControl.setValue('')">
            <fa-icon [icon]="CloseIcon"></fa-icon>
          </button>
        </mat-form-field>
      </div>
      <div class="panel-field">
        <mat-form-field class="input-full-width" floatLabel="never">
          <mat-label>Owners and Managers</mat-label>
          <input matInput type="text" [formControl]="ownerManagerSearchFormControl">
          <button mat-button *ngIf="ownerManagerSearchFormControl.value" matSuffix mat-icon-button aria-label="Clear" (click)="ownerManagerSearchFormControl.setValue('')">
            <fa-icon [icon]="CloseIcon"></fa-icon>
          </button>
        </mat-form-field>
      </div>
      <div class="panel-field">
        <mat-form-field class="input-full-width" floatLabel="never">
          <mat-label>Any Field</mat-label>
          <input matInput type="text" [formControl]="anyFieldSearchFormControl">
          <button mat-button *ngIf="anyFieldSearchFormControl.value" matSuffix mat-icon-button aria-label="Clear" (click)="anyFieldSearchFormControl.setValue('')">
            <fa-icon [icon]="CloseIcon"></fa-icon>
          </button>
        </mat-form-field>
      </div>
    </div>

    <div class="panel-group">
      <div class="panel-field">
        <div class="panel-field-label">Staff Owned</div>
        <div class="panel-field-control">
          <mat-radio-group name="staffOwned" aria-label="Staff owned" [formControl]="staffOwnedFilterFormControl">
            <mat-radio-button value="true">Yes</mat-radio-button>
            <mat-radio-button value="false">No</mat-radio-button>
            <mat-radio-button value="all">All</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

      <div class="panel-field">
        <div class="panel-field-label">Student Owned</div>
        <div class="panel-field-control">
          <mat-radio-group name="studentOwned" aria-label="Student owned" [formControl]="studentOwnedFilterFormControl">
            <mat-radio-button value="true">Yes</mat-radio-button>
            <mat-radio-button value="false">No</mat-radio-button>
            <mat-radio-button value="all">All</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

      <div class="panel-field">
        <div class="panel-field-label">Staff Managed</div>
        <div class="panel-field-control">
          <mat-radio-group name="staffManaged" aria-label="Staff managed" [formControl]="staffManagedFilterFormControl">
            <mat-radio-button value="true">Yes</mat-radio-button>
            <mat-radio-button value="false">No</mat-radio-button>
            <mat-radio-button value="all">All</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

      <div class="panel-field">
        <div class="panel-field-label">Student Managed</div>
        <div class="panel-field-control">
          <mat-radio-group name="studentManaged" aria-label="Student Managed" [formControl]="studentManagedFilterFormControl">
            <mat-radio-button value="true">Yes</mat-radio-button>
            <mat-radio-button value="false">No</mat-radio-button>
            <mat-radio-button value="all">All</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

      <div class="panel-field">
        <div class="panel-field-label">Staff Membership</div>
        <div class="panel-field-control">
          <mat-radio-group name="staffMembership" aria-label="Staff membership" [formControl]="staffMembershipFilterFormControl">
            <mat-radio-button value="true">Yes</mat-radio-button>
            <mat-radio-button value="false">No</mat-radio-button>
            <mat-radio-button value="all">All</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

      <div class="panel-field">
        <div class="panel-field-label">Student Membership</div>
        <div class="panel-field-control">
          <mat-radio-group name="studentMembership" aria-label="Student Membership" [formControl]="studentMembershipFilterFormControl">
            <mat-radio-button value="true">Yes</mat-radio-button>
            <mat-radio-button value="false">No</mat-radio-button>
            <mat-radio-button value="all">All</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

    </div>
  </div>

  <div class="groups-list">
    <div class="list-header">
      <div class="search-results">
        <div>Results: {{ totalRecords$ | async }} total records</div>
      </div>

      <div class="paginator">
        <span>
          Showing Page {{ currentPage.value }} of {{ maxPage$ | async }}&nbsp;&nbsp;
        </span>
        <span class="page-button">
          <fa-icon (click)="pageBeginning()" [icon]="beginningIcon" size="lg"></fa-icon>
        </span>
        <span class="page-button">
          <fa-icon (click)="pageUp()" [icon]="backwardIcon" size="lg"></fa-icon>
        </span>
        <span class="page-button">
          <fa-icon (click)="pageDown()" [icon]="forwardIcon" size="lg"></fa-icon>
        </span>
        <span class="page-button">
          <fa-icon (click)="pageEnd()" [icon]="endIcon" size="lg"></fa-icon>
        </span>
      </div>
    </div>

    <table cdk-table [dataSource]="groupsPage$">

      <!-- email Column -->
      <ng-container cdkColumnDef="email">
        <th cdk-header-cell *cdkHeaderCellDef>
          Email
        </th>
        <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.searchID)"> {{group.email}} </td>
      </ng-container>

      <!-- displayName Column -->
      <ng-container cdkColumnDef="name">
        <th cdk-header-cell *cdkHeaderCellDef>
          Name
        </th>
        <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.searchID)"> {{group.name}} </td>
      </ng-container>

      <!-- adminCreated Column -->
      <ng-container cdkColumnDef="adminCreated">
        <th cdk-header-cell *cdkHeaderCellDef> Admin Created </th>
        <td cdk-cell class="clickable boolean" *cdkCellDef="let group" (click)="selectGroup(group.searchID)">
          <ng-container *ngIf="group.adminCreated; then thenBlock else elseBlock"></ng-container>
          <ng-template #thenBlock>
            <fa-icon [icon]="TrueIcon" [styles]="{'color':'green'}" size="lg"></fa-icon>
          </ng-template>
          <ng-template #elseBlock>
            <fa-icon [icon]="FalseIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
          </ng-template>
        </td>
      </ng-container>

      <!-- membership_automation_active Column -->
      <ng-container cdkColumnDef="membership_automation_active">
        <th cdk-header-cell *cdkHeaderCellDef> Automated </th>
        <td cdk-cell class="clickable boolean" *cdkCellDef="let group" (click)="selectGroup(group.searchID)">
          <ng-container *ngIf="group.membership_automation_active; then thenBlock else elseBlock"></ng-container>
          <ng-template #thenBlock>
            <fa-icon [icon]="TrueIcon" [styles]="{'color':'green'}" size="lg"></fa-icon>
          </ng-template>
          <ng-template #elseBlock>
            <fa-icon [icon]="FalseIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
          </ng-template>
        </td>
      </ng-container>

      <!-- createdAt Column -->
      <ng-container cdkColumnDef="createdAt">
        <th cdk-header-cell *cdkHeaderCellDef>
          Created
        </th>
        <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.searchID)"> {{group.created_at}} </td>
      </ng-container>

      <!-- lastActiveAt Column -->
      <ng-container cdkColumnDef="lastActiveAt">
        <th cdk-header-cell *cdkHeaderCellDef>
          Last Active
        </th>
        <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.searchID)"> {{group.lastActiveAt}} </td>
      </ng-container>

      <!-- directMembersCount -->
      <ng-container cdkColumnDef="directMembersCount">
        <th cdk-header-cell *cdkHeaderCellDef>
          Members
        </th>
        <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.searchID)"> {{group.directMembersCount}} </td>
      </ng-container>

      <tr cdk-header-row *cdkHeaderRowDef="displayedColumns$.value; sticky: true"></tr>
      <tr cdk-row *cdkRowDef="let row; columns: displayedColumns$.value;"></tr>
    </table>

  </div>
</div>
