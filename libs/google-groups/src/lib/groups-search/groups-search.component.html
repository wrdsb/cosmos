<h1>Search Google Groups</h1>

<div class="googleGroupsSearch">
  <div class="searchPanel">
    <div>
      {{ totalRecords$ | async }} total records
    </div>
    <div>
      <mat-form-field class="input-full-width" floatLabel="never">
        <mat-label>Search...</mat-label>
        <input matInput type="text" [formControl]="searchFormControl">
        <button mat-button *ngIf="searchFormControl.value" matSuffix mat-icon-button aria-label="Clear" (click)="searchFormControl.setValue('')">
          <fa-icon [icon]="CloseIcon"></fa-icon>
        </button>
      </mat-form-field>
    </div>

    <mat-divider></mat-divider>
    
    <div>
      <p>Admin Created?</p>
      <mat-button-toggle-group name="adminCreated" aria-label="Admin Created?">
        <mat-button-toggle value="either">?</mat-button-toggle>
        <mat-button-toggle value="true">Yes</mat-button-toggle>
        <mat-button-toggle value="false">No</mat-button-toggle>
      </mat-button-toggle-group>
    </div>

    <div>
      <p>Automated?</p>
      <mat-button-toggle-group name="automated" aria-label="Automated?">
        <mat-button-toggle value="either">?</mat-button-toggle>
        <mat-button-toggle value="true">Yes</mat-button-toggle>
        <mat-button-toggle value="false">No</mat-button-toggle>
      </mat-button-toggle-group>
    </div>
  </div>

  <div class="groups-list">
    <div>
      Showing Page {{ currentPage.value }} of {{ maxPage$ | async }}&nbsp;&nbsp;
    </div>

    <div>
      <span class="page-button">
        <fa-icon (click)="pageBeginning()" [icon]="beginningIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
      </span>
      <span class="page-button">
        <fa-icon (click)="pageUp()" [icon]="backwardIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
      </span>
      <span class="page-button">
        <fa-icon (click)="pageDown()" [icon]="forwardIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
      </span>
      <span class="page-button">
        <fa-icon (click)="pageEnd()" [icon]="endIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
      </span>
    </div>

    <table cdk-table [dataSource]="groupsPage$">

      <!-- email Column -->
      <ng-container cdkColumnDef="email">
        <th cdk-header-cell *cdkHeaderCellDef>
          Email
        </th>
        <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.searchID)"> {{group.email}} </td>
      </ng-container>

      <!-- displayName Column -->
      <ng-container cdkColumnDef="name">
        <th cdk-header-cell *cdkHeaderCellDef>
          Name
        </th>
        <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.searchID)"> {{group.name}} </td>
      </ng-container>

      <!-- adminCreated Column -->
      <ng-container cdkColumnDef="adminCreated">
        <th cdk-header-cell *cdkHeaderCellDef> Admin<br /> Created? </th>
        <td cdk-cell class="clickable boolean" *cdkCellDef="let group" (click)="selectGroup(group.searchID)">
          <ng-container *ngIf="group.adminCreated; then thenBlock else elseBlock"></ng-container>
          <ng-template #thenBlock>
            <fa-icon [icon]="TrueIcon" [styles]="{'color':'green'}" size="lg"></fa-icon>
          </ng-template>
          <ng-template #elseBlock>
            <fa-icon [icon]="FalseIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
          </ng-template>
        </td>
      </ng-container>

      <!-- membership_automation_active Column -->
      <ng-container cdkColumnDef="membership_automation_active">
        <th cdk-header-cell *cdkHeaderCellDef> Automated? </th>
        <td cdk-cell class="clickable boolean" *cdkCellDef="let group" (click)="selectGroup(group.searchID)">
          <ng-container *ngIf="group.membership_automation_active; then thenBlock else elseBlock"></ng-container>
          <ng-template #thenBlock>
            <fa-icon [icon]="TrueIcon" [styles]="{'color':'green'}" size="lg"></fa-icon>
          </ng-template>
          <ng-template #elseBlock>
            <fa-icon [icon]="FalseIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
          </ng-template>
        </td>
      </ng-container>

      <tr cdk-header-row *cdkHeaderRowDef="displayedColumns$.value; sticky: true"></tr>
      <tr cdk-row *cdkRowDef="let row; columns: displayedColumns$.value;"></tr>
    </table>

    <div>
      <span class="page-button">
        <fa-icon (click)="pageBeginning()" [icon]="beginningIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
      </span>
      <span class="page-button">
        <fa-icon (click)="pageUp()" [icon]="backwardIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
      </span>
      <span class="page-button">
        <fa-icon (click)="pageDown()" [icon]="forwardIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
      </span>
      <span class="page-button">
        <fa-icon (click)="pageEnd()" [icon]="endIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
      </span>
    </div>

  </div>
</div>
