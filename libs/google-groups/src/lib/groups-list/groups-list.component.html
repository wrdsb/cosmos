<div>
  {{ listGroupsRequestState$ | async | json }}
</div>

<div>
  {{ selectedGroup$ | async | json }}
</div>

<ngb-pagination
  [boundaryLinks]=true
  [directionLinks]=true
  [ellipses]=true
  [maxSize]=7
  [rotate]=true
  [collectionSize]="groupsList$.value.length"
  [pageSize]="pageSize$.value"
  [page]="currentPage$.value"
  (pageChange)="currentPage$.next($event)">
</ngb-pagination>

<div class="row">
  <div class="col-6">
    <div class="form-inline">
      <div class="form-group">
        <div class="input-group mr-3">
          <input
            type="text"
            class="form-control"
            placeholder="Search…"
            [formControl]="searchFormControl">
          <div class="input-group-append">
            <button
              class="btn btn-outline-secondary"
              (click)="searchFormControl.setValue('')">
              x
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

<div class="widget">
  <div class="widget-sidebar"></div>

  <div class="widget-content">

    <div class="widget-title">Google Groups</div>

    <div class="widget-main">

      <table cdk-table [dataSource]="groupsPage$">

        <!-- email Column -->
        <ng-container cdkColumnDef="email">
          <th cdk-header-cell *cdkHeaderCellDef> Email </th>
          <td cdk-cell *cdkCellDef="let group" (click)="selectGroup(group)"> {{group.email}} </td>
        </ng-container>

        <!-- displayName Column -->
        <ng-container cdkColumnDef="name">
          <th cdk-header-cell *cdkHeaderCellDef (click)="adjustSort('name')">
            Name
            <span *ngIf="sortKey$.value === 'name'">
              {{ sortDirection$.value === 'asc' ? '↥' : '↧' }}
            </span>
          </th>
          <td cdk-cell *cdkCellDef="let group" (click)="selectGroup(group)"> {{group.name}} </td>
        </ng-container>

        <!-- description Column -->
        <ng-container cdkColumnDef="description">
          <th cdk-header-cell *cdkHeaderCellDef> Description </th>
          <td cdk-cell *cdkCellDef="let group" (click)="selectGroup(group)"> {{group.description}} </td>
        </ng-container>

        <!-- adminCreated Column -->
        <ng-container cdkColumnDef="adminCreated">
          <th cdk-header-cell *cdkHeaderCellDef> Admin Created? </th>
          <td cdk-cell *cdkCellDef="let group" (click)="selectGroup(group)"> {{group.adminCreated}} </td>
        </ng-container>

        <!-- membership_automation_active Column -->
        <ng-container cdkColumnDef="membership_automation_active">
          <th cdk-header-cell *cdkHeaderCellDef> Automated? </th>
          <td cdk-cell *cdkCellDef="let group" (click)="selectGroup(group)"> {{group.membership_automation_active}} </td>
        </ng-container>

        <tr cdk-header-row *cdkHeaderRowDef="displayedColumns$.value; sticky: true"></tr>
        <tr cdk-row *cdkRowDef="let row; columns: displayedColumns$.value;"></tr>
      </table>

    </div>

  </div>
</div>

<div *ngIf="groupSelected">
  <h2>{{selectedGroup$.value.name}} Details</h2>
  <div><span>id: </span>{{selectedGroup$.value.id}}</div>
</div>
