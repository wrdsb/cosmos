<div class="groups-list">
  <div class="widget list">

    <div class="widget-sidebar"></div>

    <div class="widget-content">

      <div class="widget-header">
        <div class="widget-title">
          Google Groups
        </div>

        <div>
          <input type="text" class="form-control" placeholder="Searchâ€¦" [formControl]="searchFormControl">
          <button (click)="searchFormControl.setValue('')">Clear</button>
        </div>

        <div class="widget-info">
          {{ groupsList$.value.length }} total records |
          Showing Page {{ currentPage$.value }} of {{ maxPage$.value }}&nbsp;&nbsp;
        </div>
      </div>

      <div class="widget-main">
        <div>
          <button mat-flat-button color="primary" (click)="pageUp()">Page Up</button>
        </div>

        <table cdk-table [dataSource]="groupsPage$">

          <!-- email Column -->
          <ng-container cdkColumnDef="email">
            <th cdk-header-cell *cdkHeaderCellDef (click)="adjustSort('email')">
              Email
              <span *ngIf="sortKey$.value === 'email'">
                <ng-container *ngIf="sortDirection$.value === 'asc'; then thenBlock else elseBlock"></ng-container>
                <ng-template #thenBlock>
                  <fa-icon [icon]="angleUpIcon" size="lg"></fa-icon>
                </ng-template>
                <ng-template #elseBlock>
                  <fa-icon [icon]="angleDownIcon" size="lg"></fa-icon>
                </ng-template>
              </span>
            </th>
            <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.email)"> {{group.email}} </td>
          </ng-container>

          <!-- displayName Column -->
          <ng-container cdkColumnDef="name">
            <th cdk-header-cell *cdkHeaderCellDef (click)="adjustSort('name')">
              Name
              <span *ngIf="sortKey$.value === 'name'">
                <ng-container *ngIf="sortDirection$.value === 'asc'; then thenBlock else elseBlock"></ng-container>
                <ng-template #thenBlock>
                  <fa-icon [icon]="angleUpIcon" size="lg"></fa-icon>
                </ng-template>
                <ng-template #elseBlock>
                  <fa-icon [icon]="angleDownIcon" size="lg"></fa-icon>
                </ng-template>
              </span>
            </th>
            <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.email)"> {{group.name}} </td>
          </ng-container>

          <!-- adminCreated Column -->
          <ng-container cdkColumnDef="adminCreated">
            <th cdk-header-cell *cdkHeaderCellDef> Admin<br /> Created? </th>
            <td cdk-cell class="clickable boolean" *cdkCellDef="let group" (click)="selectGroup(group.email)">
              <ng-container *ngIf="group.adminCreated; then thenBlock else elseBlock"></ng-container>
              <ng-template #thenBlock>
                <fa-icon [icon]="TrueIcon" [styles]="{'color':'green'}" size="lg"></fa-icon>
              </ng-template>
              <ng-template #elseBlock>
                <fa-icon [icon]="FalseIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
              </ng-template>
            </td>
          </ng-container>

          <!-- membership_automation_active Column -->
          <ng-container cdkColumnDef="membership_automation_active">
            <th cdk-header-cell *cdkHeaderCellDef> Automated? </th>
            <td cdk-cell class="clickable boolean" *cdkCellDef="let group" (click)="selectGroup(group.email)">
              <ng-container *ngIf="group.membership_automation_active; then thenBlock else elseBlock"></ng-container>
              <ng-template #thenBlock>
                <fa-icon [icon]="TrueIcon" [styles]="{'color':'green'}" size="lg"></fa-icon>
              </ng-template>
              <ng-template #elseBlock>
                <fa-icon [icon]="FalseIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
              </ng-template>
            </td>
          </ng-container>

          <tr cdk-header-row *cdkHeaderRowDef="displayedColumns$.value; sticky: true"></tr>
          <tr cdk-row *cdkRowDef="let row; columns: displayedColumns$.value;"></tr>
        </table>

        <button mat-flat-button color="primary" (click)="pageDown()">Page Down</button>
      </div>

    </div>
  </div>
</div>

<div>
  {{ listGroupsRequestState$ | async | json }}
</div>
