<div class="groups-list">
  <div class="widget list">

    <div class="widget-sidebar"></div>

    <div>
      <div>
      </div>
    </div>

    <div class="widget-content">

      <div class="widget-header">
        <div class="widget-title">
          Google Groups
        </div>

        <div class="widget-info">
          {{ groupsList$.value.length }} total records |
          Showing Page {{ currentPage$.value }} of {{ maxPage$.value }}
        </div>
      </div>

      <div class="widget-main">
        <div>
          <input type="text" class="form-control" placeholder="Searchâ€¦" [formControl]="searchFormControl">
          <button (click)="searchFormControl.setValue('')">Clear</button>
        </div>

        <button mat-button (click)="pageUp()">Page Up</button>

        <table cdk-table [dataSource]="groupsPage$">

          <!-- email Column -->
          <ng-container cdkColumnDef="email">
            <th cdk-header-cell *cdkHeaderCellDef (click)="adjustSort('email')">
              Email
              <span *ngIf="sortKey$.value === 'email'">
                <ng-container *ngIf="sortDirection$.value === 'asc'; then thenBlock else elseBlock"></ng-container>
                <ng-template #thenBlock>
                  <fa-icon [icon]="angleUpIcon" size="lg"></fa-icon>
                </ng-template>
                <ng-template #elseBlock>
                  <fa-icon [icon]="angleDownIcon" size="lg"></fa-icon>
                </ng-template>
              </span>
            </th>
            <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.email)"> {{group.email}} </td>
          </ng-container>

          <!-- displayName Column -->
          <ng-container cdkColumnDef="name">
            <th cdk-header-cell *cdkHeaderCellDef (click)="adjustSort('name')">
              Name
              <span *ngIf="sortKey$.value === 'name'">
                <ng-container *ngIf="sortDirection$.value === 'asc'; then thenBlock else elseBlock"></ng-container>
                <ng-template #thenBlock>
                  <fa-icon [icon]="angleUpIcon" size="lg"></fa-icon>
                </ng-template>
                <ng-template #elseBlock>
                  <fa-icon [icon]="angleDownIcon" size="lg"></fa-icon>
                </ng-template>
              </span>
            </th>
            <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.email)"> {{group.name}} </td>
          </ng-container>

          <!-- adminCreated Column -->
          <ng-container cdkColumnDef="adminCreated">
            <th cdk-header-cell *cdkHeaderCellDef> Admin<br /> Created? </th>
            <td cdk-cell  class="clickable"*cdkCellDef="let group" (click)="selectGroup(group.email)">
              <ng-container *ngIf="group.adminCreated; then thenBlock else elseBlock"></ng-container>
              <ng-template #thenBlock>
                <fa-icon [icon]="TrueIcon" [styles]="{'color':'green'}" size="lg"></fa-icon>
              </ng-template>
              <ng-template #elseBlock>
                <fa-icon [icon]="FalseIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
              </ng-template>
            </td>
          </ng-container>

          <!-- membership_automation_active Column -->
          <ng-container cdkColumnDef="membership_automation_active">
            <th cdk-header-cell *cdkHeaderCellDef> Automated? </th>
            <td cdk-cell class="clickable" *cdkCellDef="let group" (click)="selectGroup(group.email)">
              <ng-container *ngIf="group.membership_automation_active; then thenBlock else elseBlock"></ng-container>
              <ng-template #thenBlock>
                <fa-icon [icon]="TrueIcon" [styles]="{'color':'green'}" size="lg"></fa-icon>
              </ng-template>
              <ng-template #elseBlock>
                <fa-icon [icon]="FalseIcon" [styles]="{'color':'orange'}" size="lg"></fa-icon>
              </ng-template>
            </td>
          </ng-container>

          <tr cdk-header-row *cdkHeaderRowDef="displayedColumns$.value; sticky: true"></tr>
          <tr cdk-row *cdkRowDef="let row; columns: displayedColumns$.value;"></tr>
        </table>

        <button mat-button (click)="pageDown()">Page Down</button>
      </div>

    </div>
  </div>

  <div class="widget detail">
    <div *ngIf="groupSelected">
      <div class="widget-header">
        <div class="widget-title">
          {{selectedGroup$.value.name}}
        </div>

        <div class="widget-info">
          <span routerLink="/google/groups/{{selectedGroup$.value.id}}">View Details</span>
        </div>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">IGOR ID:</span>
        <span class="detail-value">{{selectedGroup$.value.id}}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Name:</span>
        <span class="detail-value">{{selectedGroup$.value.name}}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Email:</span>
        <span class="detail-value">{{selectedGroup$.value.email}}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Description:</span>
        <span class="detail-value">{{selectedGroup$.value.description}}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Admin Created:</span>
        <span class="detail-value">{{selectedGroup$.value.adminCreated}}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Automated:</span>
        <span class="detail-value">{{selectedGroup$.value.membership_automation_active}}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Business Owner:</span>
        <span class="detail-value">{{ selectedGroup$.value.businessOwner }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Owners:</span>
        <span class="detail-value">
          <ul *ngIf="selectedGroup$.value.owners && selectedGroup$.value.owners.length > 0">
            <li *ngFor="let owner of selectedGroup$.value.owners">
              {{ owner }}
            </li>
          </ul>
        </span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Managers:</span>
        <span class="detail-value">
          <ul *ngIf="selectedGroup$.value.managers && selectedGroup$.value.managers.length > 0">
            <li *ngFor="let manager of selectedGroup$.value.managers">
              {{ manager }}
            </li>
          </ul>
        </span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Staff Owned:</span>
        <span class="detail-value">{{ selectedGroup$.value.staffOwned }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Student Owned:</span>
        <span class="detail-value">{{ selectedGroup$.value.studentOwned }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Staff Managed:</span>
        <span class="detail-value">{{ selectedGroup$.value.staffManaged }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Student Managed:</span>
        <span class="detail-value">{{ selectedGroup$.value.studentManaged }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Staff Membership:</span>
        <span class="detail-value">{{ selectedGroup$.value.staffMembership }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Student Membership:</span>
        <span class="detail-value">{{ selectedGroup$.value.studentMembership }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-attribute">Is Open:</span>
        <span class="detail-value">{{ selectedGroup$.value.isOpen }}</span>
      </div>
    </div>
  </div>

</div>

<div>
  {{ listGroupsRequestState$ | async | json }}
</div>
