!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{lK3A:function(n,a,c){"use strict";c.r(a),c.d(a,"GoogleCalendarModule",(function(){return Z}));var r,s=c("2kYt"),i=c("vobO"),o=c("Yzzg"),l=c("fL1z"),d=c("nIj0"),u=c("Pq5H"),b=c("PBFl"),h=c("FlRo"),f=c("OZ4H"),p=c("sEIs"),g=c("BnzL"),C=c("EM62"),v=c("C05f"),w=c("1xOy"),m=c("lu7F"),k=c("8j5Y"),y=c("bl/x"),S=c("4e/d"),x=c("8bJt"),U=c("knQq"),O=c("L6rV"),T=((r=function(){function n(t,a){e(this,n),this.messagesService=t,this.viewfinderService=a,this.searchRequestState=new v.a({status:x.a.UNKNOWN,response:"response",error:"error"}),this.searchRequestState$=this.searchRequestState.asObservable(),this.searchResponse=new v.a({header:{message:"",chatter:"",status:0,timestamp:""},payload:{}}),this.searchResponse$=this.searchResponse.asObservable(),this.calendarsList=new v.a([]),this.calendarsList$=this.calendarsList.asObservable(),this.calendarSelected=new v.a(!1),this.calendarSelected$=this.calendarSelected.asObservable(),this.selectedCalendar=new v.a(null),this.selectedCalendar$=this.selectedCalendar.asObservable()}return t(n,[{key:"selectCalendar",value:function(e){this.findCalendar(e)}},{key:"deselectCalendar",value:function(){this.calendarSelected.next(!1),this.selectedCalendar.next(null)}},{key:"findCalendar",value:function(e){var n=this;console.log("Google Calendar Service: findCalendar()"),this.searchRequestState.next({status:x.a.LOADING,response:"unknown",error:"unknown"}),this.viewfinderService.findGoogleCalendar(e).pipe(Object(k.a)((function(e){return console.log("Google Calendar Service: find request")})),Object(y.a)(2),Object(S.a)((function(e){throw console.log("Google Calendar Service: catch find request error"),n.searchRequestState.next({status:x.a.ERROR,response:"",error:e}),n.searchResponse.next({header:{status:200,message:"error",chatter:"error",timestamp:"timestamp"},payload:{}}),"Google Calendar Service: error finding Google Calendar"})),Object(k.a)((function(e){n.searchRequestState.next({status:x.a.SUCCESS,response:"success",error:""}),console.log("Google Calendar Service: success finding Google Calendar")}))).subscribe((function(e){n.calendarSelected.next(!0),n.selectedCalendar.next(e.payload.documents[0])}))}},{key:"searchCalendars",value:function(e){var n=this;console.log("Google Calendar Service: searchCalendars()");var t=Object.assign({includeTotalCount:!0,orderBy:["email asc"],skip:0,top:20},e);this.searchRequestState.next({status:x.a.LOADING,response:"unknown",error:"unknown"}),this.viewfinderService.searchGoogleCalendars(t).pipe(Object(k.a)((function(e){return console.log("Google Calendars Service: search request")})),Object(y.a)(2),Object(S.a)((function(e){throw console.log("Google Calendars Service: catch search request error"),n.searchRequestState.next({status:x.a.ERROR,response:"",error:e}),n.searchResponse.next({header:{status:200,message:"error",chatter:"error",timestamp:"timestamp"},payload:{}}),"Google Calendars Service: error searching Viewfinder"})),Object(k.a)((function(e){n.searchRequestState.next({status:x.a.SUCCESS,response:"success",error:""}),console.log("Google Calendars Service: success searching Viewfinder")}))).subscribe((function(e){n.searchResponse.next(e),n.calendarsList.next(e.payload.documents)}))}}]),n}()).\u0275fac=function(e){return new(e||r)(C.Yb(U.a),C.Yb(O.a))},r.\u0275prov=C.Kb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),P=c("YtkY"),R=c("mWib"),I=c("Ohay");function j(e,n){if(1&e&&(C.Sb(0),C.Ub(1,"h1",1),C.wc(2),C.Tb(),C.Ub(3,"div",2),C.Ub(4,"div",3),C.Ub(5,"span",4),C.wc(6,"Name (Summary):"),C.Tb(),C.Ub(7,"span",5),C.wc(8),C.Tb(),C.Tb(),C.Ub(9,"div",3),C.Ub(10,"span",4),C.wc(11,"Description:"),C.Tb(),C.Ub(12,"span",5),C.wc(13),C.Tb(),C.Tb(),C.Ub(14,"div",3),C.Ub(15,"span",4),C.wc(16,"Calendar ID:"),C.Tb(),C.Ub(17,"span",5),C.wc(18),C.Tb(),C.Tb(),C.Tb(),C.Ub(19,"div",6),C.Ub(20,"button",7),C.wc(21,"Close"),C.Tb(),C.Tb(),C.Rb()),2&e){var t=n.ngIf;C.Cb(2),C.xc(t.summary),C.Cb(6),C.xc(t.summary),C.Cb(5),C.xc(t.description),C.Cb(5),C.xc(t.id),C.Cb(2),C.jc("mat-dialog-close",!0)}}var $,D=(($=function n(t){e(this,n),this.calendarService=t,this.selectedCalendar$=this.calendarService.selectedCalendar$}).\u0275fac=function(e){return new(e||$)(C.Ob(T))},$.\u0275cmp=C.Ib({type:$,selectors:[["cosmos-calendar-meta-dialog"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],["mat-dialog-content","",1,"detail"],[1,"detail-row"],[1,"detail-attribute"],[1,"detail-value"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"]],template:function(e,n){1&e&&(C.uc(0,j,22,5,"ng-container",0),C.fc(1,"async")),2&e&&C.jc("ngIf",C.gc(1,1,n.selectedCalendar$))},directives:[s.l,f.f,f.d,f.b,b.a,f.c],pipes:[s.b],styles:[".detail[_ngcontent-%COMP%]{font-family:Jura,sans-serif;font-size:20px;font-weight:400;color:#fff;text-decoration:none;line-height:1.5}.detail-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:flex-start}.detail-attribute[_ngcontent-%COMP%]{font-weight:700}.users-list[_ngcontent-%COMP%]{list-style:none}"]}),$);function M(e,n){1&e&&(C.Ub(0,"th",19),C.wc(1," ID "),C.Tb())}function _(e,n){if(1&e){var t=C.Vb();C.Ub(0,"td",20),C.cc("click",(function(){C.nc(t);var e=n.$implicit;return C.ec().selectCalendar(e.searchID)})),C.wc(1),C.Tb()}if(2&e){var a=n.$implicit;C.Cb(1),C.yc(" ",a.searchID," ")}}function G(e,n){1&e&&(C.Ub(0,"th",19),C.wc(1," Name "),C.Tb())}function q(e,n){if(1&e){var t=C.Vb();C.Ub(0,"td",20),C.cc("click",(function(){C.nc(t);var e=n.$implicit;return C.ec().selectCalendar(e.searchID)})),C.wc(1),C.Tb()}if(2&e){var a=n.$implicit;C.Cb(1),C.yc(" ",a.summary," ")}}function L(e,n){1&e&&(C.Ub(0,"th",19),C.wc(1," Description "),C.Tb())}function V(e,n){if(1&e){var t=C.Vb();C.Ub(0,"td",20),C.cc("click",(function(){C.nc(t);var e=n.$implicit;return C.ec().selectCalendar(e.searchID)})),C.wc(1),C.Tb()}if(2&e){var a=n.$implicit;C.Cb(1),C.yc(" ",a.description," ")}}function z(e,n){1&e&&C.Pb(0,"tr",21)}function E(e,n){1&e&&C.Pb(0,"tr",22)}var F,A,H,N,Y,B=function(){return{color:"orange"}},J=((A=function(){function n(t,a){var c=this;e(this,n),this.calendarService=t,this.dialog=a,this.FalseIcon=w.a,this.MaybeIcon=m.a,this.TrueIcon=m.e,this.angleUpIcon=m.c,this.angleDownIcon=m.b,this.beginningIcon=m.f,this.backwardIcon=m.d,this.forwardIcon=m.h,this.endIcon=m.g,this.displayedColumns$=new v.a(["summary","description","id"]),this.searchFormControl=new d.c,this.currentPage=new v.a(1),this.currentSearch=new v.a("*"),this.pageSize=new v.a(20),this.maxPage=new v.a(1),this.searchResponse$=this.calendarService.searchResponse$,this.totalRecords$=this.searchResponse$.pipe(Object(P.a)((function(e){return e.payload.count}))),this.calendarsPage$=this.calendarService.calendarsList$,this.maxPage$=this.totalRecords$.pipe(Object(P.a)((function(e){return Math.ceil(e/c.pageSize.value)}))),this.maxPage$.subscribe(this.maxPage),this.calendarSelected$=this.calendarService.calendarSelected$,this.selectedCalendar$=this.calendarService.selectedCalendar$}return t(n,[{key:"ngOnInit",value:function(){this.searchCalendars()}},{key:"ngAfterViewInit",value:function(){var e=this;this.searchFormControl.valueChanges.pipe(Object(R.a)(400),Object(I.a)()).subscribe((function(n){console.log(n),e.currentSearch.next(n),e.currentPage.next(1),e.searchCalendars()}))}},{key:"pageBeginning",value:function(){this.currentPage.next(1),this.searchCalendars()}},{key:"pageUp",value:function(){var e=this.currentPage.value-1;this.nextPageValid(e)&&(this.currentPage.next(e),this.searchCalendars())}},{key:"pageDown",value:function(){var e=this.currentPage.value+1;this.nextPageValid(e)&&(this.currentPage.next(e),this.searchCalendars())}},{key:"pageEnd",value:function(){this.currentPage.next(this.maxPage.value),this.searchCalendars()}},{key:"nextPageValid",value:function(e){return e>=1&&e<=this.maxPage.value}},{key:"selectCalendar",value:function(e){console.log("Show details for "+e),this.calendarService.selectCalendar(e),this.calendarMetaDialogRef=this.dialog.open(D,{width:"800px"})}},{key:"deselectCalendar",value:function(){console.log("Deselect selected calendar"),this.calendarService.deselectCalendar()}},{key:"searchCalendars",value:function(){this.calendarService.searchCalendars({search:this.currentSearch.value,skip:(this.currentPage.value-1)*this.pageSize.value})}}]),n}()).\u0275fac=function(e){return new(e||A)(C.Ob(T),C.Ob(f.a))},A.\u0275cmp=C.Ib({type:A,selectors:[["cosmos-calendar-search"]],decls:45,vars:36,consts:[[1,"calendars-list"],[1,"widget","list"],[1,"widget-content"],[1,"widget-header"],[1,"widget-title"],["type","text","placeholder","Search\u2026",1,"form-control",3,"formControl"],[3,"click"],[1,"widget-info"],[1,"widget-main"],[1,"page-button"],["size","lg",3,"icon","styles","click"],["cdk-table","",3,"dataSource"],["cdkColumnDef","id"],["cdk-header-cell","",4,"cdkHeaderCellDef"],["cdk-cell","","class","clickable",3,"click",4,"cdkCellDef"],["cdkColumnDef","summary"],["cdkColumnDef","description"],["cdk-header-row","",4,"cdkHeaderRowDef","cdkHeaderRowDefSticky"],["cdk-row","",4,"cdkRowDef","cdkRowDefColumns"],["cdk-header-cell",""],["cdk-cell","",1,"clickable",3,"click"],["cdk-header-row",""],["cdk-row",""]],template:function(e,n){1&e&&(C.Ub(0,"div",0),C.Ub(1,"div",1),C.Ub(2,"div",2),C.Ub(3,"div",3),C.Ub(4,"div",4),C.wc(5," Search Google Calendars "),C.Tb(),C.Ub(6,"div"),C.Pb(7,"input",5),C.Ub(8,"button",6),C.cc("click",(function(){return n.searchFormControl.setValue("")})),C.wc(9,"Clear"),C.Tb(),C.Tb(),C.Ub(10,"div",7),C.wc(11),C.fc(12,"async"),C.fc(13,"async"),C.Tb(),C.Tb(),C.Ub(14,"div",8),C.Ub(15,"div"),C.Ub(16,"span",9),C.Ub(17,"fa-icon",10),C.cc("click",(function(){return n.pageBeginning()})),C.Tb(),C.Tb(),C.Ub(18,"span",9),C.Ub(19,"fa-icon",10),C.cc("click",(function(){return n.pageUp()})),C.Tb(),C.Tb(),C.Ub(20,"span",9),C.Ub(21,"fa-icon",10),C.cc("click",(function(){return n.pageDown()})),C.Tb(),C.Tb(),C.Ub(22,"span",9),C.Ub(23,"fa-icon",10),C.cc("click",(function(){return n.pageEnd()})),C.Tb(),C.Tb(),C.Tb(),C.Ub(24,"table",11),C.Sb(25,12),C.uc(26,M,2,0,"th",13),C.uc(27,_,2,1,"td",14),C.Rb(),C.Sb(28,15),C.uc(29,G,2,0,"th",13),C.uc(30,q,2,1,"td",14),C.Rb(),C.Sb(31,16),C.uc(32,L,2,0,"th",13),C.uc(33,V,2,1,"td",14),C.Rb(),C.uc(34,z,1,0,"tr",17),C.uc(35,E,1,0,"tr",18),C.Tb(),C.Ub(36,"div"),C.Ub(37,"span",9),C.Ub(38,"fa-icon",10),C.cc("click",(function(){return n.pageBeginning()})),C.Tb(),C.Tb(),C.Ub(39,"span",9),C.Ub(40,"fa-icon",10),C.cc("click",(function(){return n.pageUp()})),C.Tb(),C.Tb(),C.Ub(41,"span",9),C.Ub(42,"fa-icon",10),C.cc("click",(function(){return n.pageDown()})),C.Tb(),C.Tb(),C.Ub(43,"span",9),C.Ub(44,"fa-icon",10),C.cc("click",(function(){return n.pageEnd()})),C.Tb(),C.Tb(),C.Tb(),C.Tb(),C.Tb(),C.Tb(),C.Tb()),2&e&&(C.Cb(7),C.jc("formControl",n.searchFormControl),C.Cb(4),C.Ac(" ",C.gc(12,24,n.totalRecords$)," total records | Showing Page ",n.currentPage.value," of ",C.gc(13,26,n.maxPage$),"\xa0\xa0 "),C.Cb(6),C.jc("icon",n.beginningIcon)("styles",C.kc(28,B)),C.Cb(2),C.jc("icon",n.backwardIcon)("styles",C.kc(29,B)),C.Cb(2),C.jc("icon",n.forwardIcon)("styles",C.kc(30,B)),C.Cb(2),C.jc("icon",n.endIcon)("styles",C.kc(31,B)),C.Cb(1),C.jc("dataSource",n.calendarsPage$),C.Cb(10),C.jc("cdkHeaderRowDef",n.displayedColumns$.value)("cdkHeaderRowDefSticky",!0),C.Cb(1),C.jc("cdkRowDefColumns",n.displayedColumns$.value),C.Cb(3),C.jc("icon",n.beginningIcon)("styles",C.kc(32,B)),C.Cb(2),C.jc("icon",n.backwardIcon)("styles",C.kc(33,B)),C.Cb(2),C.jc("icon",n.forwardIcon)("styles",C.kc(34,B)),C.Cb(2),C.jc("icon",n.endIcon)("styles",C.kc(35,B)))},directives:[d.b,d.j,d.d,u.a,l.p,l.e,l.k,l.c,l.m,l.o,l.j,l.b,l.l,l.n],pipes:[s.b],styles:[".widget[_ngcontent-%COMP%], [_nghost-%COMP%]{display:grid}.widget[_ngcontent-%COMP%]{border:2px solid #6d6d6b;border-top:14px solid #6d6d6b;padding:10px;overflow:auto;font-family:Jura,sans-serif;font-size:18px;font-weight:400;color:#fff;text-decoration:none;line-height:1.5}.widget-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;color:#0a1a43;background-color:#29c2d7}table[_ngcontent-%COMP%]{width:100%}.calendars-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:flex-start}.list[_ngcontent-%COMP%]{flex:1 1 auto}.clickable[_ngcontent-%COMP%]{cursor:pointer}.cdk-row[_ngcontent-%COMP%]{background-color:#1f3d73}.cdk-column-email[_ngcontent-%COMP%]{width:30%}.cdk-column-name[_ngcontent-%COMP%]{width:45%}.cdk-column-adminCreated[_ngcontent-%COMP%], .cdk-column-membership_automation_active[_ngcontent-%COMP%]{text-align:center}.page-button[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px;cursor:pointer}"]}),A),K=((F=function(){function n(){e(this,n)}return t(n,[{key:"ngOnInit",value:function(){}}]),n}()).\u0275fac=function(e){return new(e||F)},F.\u0275cmp=C.Ib({type:F,selectors:[["cosmos-calendar-home"]],decls:1,vars:0,template:function(e,n){1&e&&C.Pb(0,"cosmos-calendar-search")},directives:[J],styles:[""]}),F),W=[{path:"calendar",component:(H=function(){function n(){e(this,n)}return t(n,[{key:"ngOnInit",value:function(){}}]),n}(),H.\u0275fac=function(e){return new(e||H)},H.\u0275cmp=C.Ib({type:H,selectors:[["cosmos-calendar-detail"]],decls:2,vars:0,template:function(e,n){1&e&&(C.Ub(0,"p"),C.wc(1,"calendar-detail works!"),C.Tb())},styles:[""]}),H),data:{roles:["cosmos-superuser","cosmos-user-its"]},canActivate:[o.d,g.a]},{path:"",component:K,data:{roles:["cosmos-superuser","cosmos-user-its"]},canActivate:[o.d,g.a]}],Q=((Y=function n(){e(this,n)}).\u0275mod=C.Mb({type:Y}),Y.\u0275inj=C.Lb({factory:function(e){return new(e||Y)},imports:[[p.e.forChild(W)],p.e]}),Y),Z=((N=function n(){e(this,n)}).\u0275mod=C.Mb({type:N}),N.\u0275inj=C.Lb({factory:function(e){return new(e||N)},providers:[{provide:i.a,useClass:o.e,multi:!0}],imports:[[s.c,l.q,d.f,d.l,u.b,b.b,h.a,f.e,Q]]}),N)}}])}();