!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{j7jK:function(t,r,a){"use strict";a.r(r),a.d(r,"QuartermasterModule",function(){return J});var n,i,c,o,l,u,h=a("ofXK"),m=a("tk/3"),d=a("E8bv"),g=a("f6nW"),f=a("3Pt+"),v=a("6NWb"),p=a("bTqV"),b=a("+0xr"),S=a("0IaG"),A=a("qFsG"),w=a("1jcm"),F=a("jaxi"),y=a("f0Cb"),x=a("QibW"),I=a("d3UM"),C=a("tyNb"),O=a("Ttig"),P=a("fXoL"),k=((n=function(){function t(){e(this,t)}return s(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=P.Ib({type:n,selectors:[["cosmos-quartermaster-home"]],decls:2,vars:0,template:function(e,t){1&e&&(P.Ub(0,"h1"),P.wc(1,"Quartermaster Dashboard"),P.Tb())},styles:[""]}),n),N=a("2Vo4"),R=a("wHSu"),j=a("twK/"),q=a("lJxs"),D=a("Kj3r"),$=a("/uUt"),L=((i=function(){function t(){e(this,t)}return s(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=P.Ib({type:i,selectors:[["cosmos-asset-detail-dialog"]],decls:2,vars:0,template:function(e,t){1&e&&(P.Ub(0,"p"),P.wc(1,"asset-detail-dialog works!"),P.Tb())},styles:[""]}),i),Q=a("vkgz"),M=a("un/a"),T=a("JIr8"),U=a("t5bl"),E=a("a6nC"),V=a("Goz9"),K=((c=function(){function t(s,r){e(this,t),this.messagesService=s,this.viewfinderService=r,this.searchRequestState=new N.a({status:U.a.UNKNOWN,response:"response",error:"error"}),this.searchRequestState$=this.searchRequestState.asObservable(),this.searchResponse=new N.a({header:{message:"",chatter:"",status:0,timestamp:""},payload:{}}),this.searchResponse$=this.searchResponse.asObservable(),this.assetsList=new N.a([]),this.assetsList$=this.assetsList.asObservable(),this.assetSelected=new N.a(!1),this.assetSelected$=this.assetSelected.asObservable(),this.selectedAsset=new N.a(null),this.selectedAsset$=this.selectedAsset.asObservable()}return s(t,[{key:"selectAsset",value:function(e){this.findAsset(e)}},{key:"deselectAsset",value:function(){this.assetSelected.next(!1),this.selectedAsset.next(null)}},{key:"findAsset",value:function(e){var t=this;console.log("Quartermaster Assets Service: findAsset()"),this.searchRequestState.next({status:U.a.LOADING,response:"unknown",error:"unknown"}),this.viewfinderService.findQuartermasterAsset(e).pipe(Object(Q.a)(function(e){return console.log("Quartermaster Assets Service: find request")}),Object(M.a)(2),Object(T.a)(function(e){throw console.log("Quartermaster Assets Service: catch find request error"),t.searchRequestState.next({status:U.a.ERROR,response:"",error:e}),t.searchResponse.next({header:{status:200,message:"error",chatter:"error",timestamp:"timestamp"},payload:{}}),"Quartermaster Assets Service: error finding Asset"}),Object(Q.a)(function(e){t.searchRequestState.next({status:U.a.SUCCESS,response:"success",error:""}),console.log("Quartermaster Assets Service: success finding Asset")})).subscribe(function(e){t.assetSelected.next(!0),t.selectedAsset.next(e.payload.documents[0])})}},{key:"searchAssets",value:function(e){var t=this;console.log("Quartermaster Assets Service: searchAssets()");var s=Object.assign({includeTotalCount:!0,orderBy:["assetID asc"],skip:0,top:20},e);this.searchRequestState.next({status:U.a.LOADING,response:"unknown",error:"unknown"}),this.viewfinderService.searchQuartermasterAssets(s).pipe(Object(Q.a)(function(e){return console.log("Quartermaster Assets Service: search request")}),Object(M.a)(2),Object(T.a)(function(e){throw console.log("Quartermaster Assets Service: catch search request error"),t.searchRequestState.next({status:U.a.ERROR,response:"",error:e}),t.searchResponse.next({header:{status:200,message:"error",chatter:"error",timestamp:"timestamp"},payload:{}}),"Quartermaster Assets Service: error searching Viewfinder"}),Object(Q.a)(function(e){t.searchRequestState.next({status:U.a.SUCCESS,response:"success",error:""}),console.log("Quartermaster Assets Service: success searching Viewfinder")})).subscribe(function(e){t.searchResponse.next(e),t.assetsList.next(e.payload.documents)})}}]),t}()).\u0275fac=function(e){return new(e||c)(P.Yb(E.a),P.Yb(V.a))},c.\u0275prov=P.Kb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),z=[{path:"assets/search",component:(o=function(){function t(s,r){var a=this;e(this,t),this.assetsService=s,this.dialog=r,this.CloseIcon=R.i,this.FalseIcon=j.a,this.MaybeIcon=R.a,this.TrueIcon=R.e,this.angleUpIcon=R.c,this.angleDownIcon=R.b,this.beginningIcon=R.f,this.backwardIcon=R.d,this.forwardIcon=R.h,this.endIcon=R.g,this.displayedColumns$=new N.a(["assetID","status","manufacturer","modelName","modelID","location","program","project","poDate","serial","assignedTo","note","position","employee"]),this.isAssignedFilterFormControl=new f.c,this.statusFilterFormControl=new f.c,this.modelNameFilterFormControl=new f.c,this.programFilterFormControl=new f.c,this.locationNameFilterFormControl=new f.c,this.assetIDSearchFormControl=new f.c,this.anyFieldSearchFormControl=new f.c,this.currentIsAssignedFilter=new N.a(""),this.currentStatusFilter=new N.a(""),this.currentModelNameFilter=new N.a(""),this.currentProgramFilter=new N.a(""),this.currentLocationNameFilter=new N.a(""),this.currentAssetIDSearch=new N.a(""),this.currentAnyFieldSearch=new N.a(""),this.currentSearch=new N.a("*"),this.currentPage=new N.a(1),this.pageSize=new N.a(20),this.maxPage=new N.a(1),this.searchResponse$=this.assetsService.searchResponse$,this.totalRecords$=this.searchResponse$.pipe(Object(q.a)(function(e){return e.payload.count})),this.assetsPage$=this.assetsService.assetsList$,this.maxPage$=this.totalRecords$.pipe(Object(q.a)(function(e){return Math.ceil(e/a.pageSize.value)})),this.maxPage$.subscribe(this.maxPage),this.assetSelected$=this.assetsService.assetSelected$,this.selectedAsset$=this.assetsService.selectedAsset$}return s(t,[{key:"ngOnInit",value:function(){this.searchAssets()}},{key:"ngAfterViewInit",value:function(){var e=this;this.isAssignedFilterFormControl.valueChanges.subscribe(function(t){console.log("isAssigned Filter: ".concat(t)),e.currentIsAssignedFilter.next(t),e.searchAssets()}),this.statusFilterFormControl.valueChanges.subscribe(function(t){console.log("status Filter ".concat(t)),e.currentStatusFilter.next(t),e.searchAssets()}),this.modelNameFilterFormControl.valueChanges.subscribe(function(t){console.log("modelName Filter ".concat(t)),e.currentModelNameFilter.next(t),e.searchAssets()}),this.programFilterFormControl.valueChanges.subscribe(function(t){console.log("program Filter: ".concat(t)),e.currentProgramFilter.next(t),e.searchAssets()}),this.locationNameFilterFormControl.valueChanges.subscribe(function(t){console.log("locationName Filter: ".concat(t)),e.currentLocationNameFilter.next(t),e.currentPage.next(1),e.searchAssets()}),this.assetIDSearchFormControl.valueChanges.pipe(Object(D.a)(400),Object($.a)()).subscribe(function(t){console.log("assetID Search: ".concat(t)),e.currentAssetIDSearch.next(t),e.currentPage.next(1),e.searchAssets()}),this.anyFieldSearchFormControl.valueChanges.pipe(Object(D.a)(400),Object($.a)()).subscribe(function(t){console.log("searchTerm Search: ".concat(t)),e.currentAnyFieldSearch.next(t),e.currentPage.next(1),e.searchAssets()})}},{key:"pageBeginning",value:function(){this.currentPage.next(1),this.searchAssets()}},{key:"pageUp",value:function(){var e=this.currentPage.value-1;this.nextPageValid(e)&&(this.currentPage.next(e),this.searchAssets())}},{key:"pageDown",value:function(){var e=this.currentPage.value+1;this.nextPageValid(e)&&(this.currentPage.next(e),this.searchAssets())}},{key:"pageEnd",value:function(){this.currentPage.next(this.maxPage.value),this.searchAssets()}},{key:"nextPageValid",value:function(e){return e>=1&&e<=this.maxPage.value}},{key:"selectAsset",value:function(e){console.log("Show details for ".concat(e)),this.assetsService.selectAsset(e),this.assetDetailDialogRef=this.dialog.open(L,{width:"800px"})}},{key:"deselectAsset",value:function(){console.log("Deselect selected asset"),this.assetsService.deselectAsset()}},{key:"searchAssets",value:function(){var e="",t="*";this.currentIsAssignedFilter.value.length>0&&"all"!==this.currentIsAssignedFilter.value&&(e+="isAssigned eq ".concat(this.currentIsAssignedFilter.value)),this.currentStatusFilter.value.length>0&&"all"!==this.currentStatusFilter.value&&(e.length>0&&(e+=" and "),e+="status eq ".concat(this.currentStatusFilter.value)),this.currentModelNameFilter.value.length>0&&"all"!==this.currentModelNameFilter.value&&(e.length>0&&(e+=" and "),e+="modelName eq ".concat(this.currentModelNameFilter.value)),this.currentProgramFilter.value.length>0&&"all"!==this.currentProgramFilter.value&&(e.length>0&&(e+=" and "),e+="program eq ".concat(this.currentProgramFilter.value)),this.currentLocationNameFilter.value.length>0&&"all"!==this.currentLocationNameFilter.value&&(e.length>0&&(e+=" and "),e+="locationName eq '".concat(this.currentLocationNameFilter.value,"'")),this.currentAssetIDSearch.value.length>0&&(t=this.currentAssetIDSearch.value),this.currentAnyFieldSearch.value.length>0&&(t=this.currentAnyFieldSearch.value);var s={search:t,skip:(this.currentPage.value-1)*this.pageSize.value};e.length>0&&(s.filter=e),console.log(s),this.assetsService.searchAssets(s)}}]),t}(),o.\u0275fac=function(e){return new(e||o)(P.Ob(K),P.Ob(S.a))},o.\u0275cmp=P.Ib({type:o,selectors:[["cosmos-quartermaster-assets-search"]],decls:3,vars:0,template:function(e,t){1&e&&(P.Ub(0,"h1"),P.wc(1,"Search Quartermaster Assets"),P.Tb(),P.wc(2," Asset ID\nStatus\nSigned Out for Learn from Home\nReturned from Learn from Home\nManufacturer\nModel Name\nModel ID\nLocation\nProgram\nProject\nPO Date\nSerial\nAssigned To\nNote\nPosition\nEmployee "))},styles:[""]}),o),data:{roles:["cosmos-superuser","cosmos-user-its"]},canActivate:[d.e,O.a]},{path:"",component:k,data:{roles:["cosmos-superuser","cosmos-user-its"]},canActivate:[d.e,O.a]}],G=((u=function t(){e(this,t)}).\u0275mod=P.Mb({type:u}),u.\u0275inj=P.Lb({factory:function(e){return new(e||u)},imports:[[C.d.forChild(z)],C.d]}),u),J=((l=function t(){e(this,t)}).\u0275mod=P.Mb({type:l}),l.\u0275inj=P.Lb({factory:function(e){return new(e||l)},providers:[{provide:m.a,useClass:d.f,multi:!0}],imports:[[h.c,g.r,f.f,f.l,v.b,p.b,b.a,S.e,A.b,w.a,F.a,y.a,x.c,I.b,G]]}),l)}}])}();