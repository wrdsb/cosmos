!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{gGFp:function(t,n,r){"use strict";r.r(n),r.d(n,"AtsModule",function(){return J});var a,i,c,o,l,u,h=r("ofXK"),d=r("tk/3"),g=r("E8bv"),m=r("f6nW"),v=r("3Pt+"),f=r("6NWb"),p=r("bTqV"),S=r("+0xr"),b=r("0IaG"),A=r("qFsG"),F=r("1jcm"),w=r("jaxi"),y=r("f0Cb"),x=r("QibW"),I=r("d3UM"),C=r("tyNb"),P=r("Ttig"),O=r("fXoL"),k=((a=function(){function t(){e(this,t)}return s(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=O.Hb({type:a,selectors:[["cosmos-ats-home"]],decls:2,vars:0,template:function(e,t){1&e&&(O.Tb(0,"h1"),O.vc(1,"ATS Dashboard"),O.Sb())},styles:[""]}),a),N=r("2Vo4"),R=r("wHSu"),T=r("twK/"),j=r("lJxs"),D=r("Kj3r"),q=r("/uUt"),$=((i=function(){function t(){e(this,t)}return s(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=O.Hb({type:i,selectors:[["cosmos-asset-detail-dialog"]],decls:2,vars:0,template:function(e,t){1&e&&(O.Tb(0,"p"),O.vc(1,"asset-detail-dialog works!"),O.Sb())},styles:[""]}),i),L=r("vkgz"),M=r("un/a"),E=r("JIr8"),V=r("t5bl"),U=r("a6nC"),G=r("Goz9"),H=((c=function(){function t(s,n){e(this,t),this.messagesService=s,this.viewfinderService=n,this.searchRequestState=new N.a({status:V.a.UNKNOWN,response:"response",error:"error"}),this.searchRequestState$=this.searchRequestState.asObservable(),this.searchResponse=new N.a({header:{message:"",chatter:"",status:0,timestamp:""},payload:{}}),this.searchResponse$=this.searchResponse.asObservable(),this.assetsList=new N.a([]),this.assetsList$=this.assetsList.asObservable(),this.assetSelected=new N.a(!1),this.assetSelected$=this.assetSelected.asObservable(),this.selectedAsset=new N.a(null),this.selectedAsset$=this.selectedAsset.asObservable()}return s(t,[{key:"selectAsset",value:function(e){this.findAsset(e)}},{key:"deselectAsset",value:function(){this.assetSelected.next(!1),this.selectedAsset.next(null)}},{key:"findAsset",value:function(e){var t=this;console.log("ATS Assets Service: findAsset()"),this.searchRequestState.next({status:V.a.LOADING,response:"unknown",error:"unknown"}),this.viewfinderService.findATSAsset(e).pipe(Object(L.a)(function(e){return console.log("ATS Assets Service: find request")}),Object(M.a)(2),Object(E.a)(function(e){throw console.log("ATS Assets Service: catch find request error"),t.searchRequestState.next({status:V.a.ERROR,response:"",error:e}),t.searchResponse.next({header:{status:200,message:"error",chatter:"error",timestamp:"timestamp"},payload:{}}),"ATS Assets Service: error finding Asset"}),Object(L.a)(function(e){t.searchRequestState.next({status:V.a.SUCCESS,response:"success",error:""}),console.log("ATS Assets Service: success finding Asset")})).subscribe(function(e){t.assetSelected.next(!0),t.selectedAsset.next(e.payload.documents[0])})}},{key:"searchAssets",value:function(e){var t=this;console.log("ATS Assets Service: searchAssets()");var s=Object.assign({includeTotalCount:!0,orderBy:["assetID asc"],skip:0,top:20},e);this.searchRequestState.next({status:V.a.LOADING,response:"unknown",error:"unknown"}),this.viewfinderService.searchATSAssets(s).pipe(Object(L.a)(function(e){return console.log("ATS Assets Service: search request")}),Object(M.a)(2),Object(E.a)(function(e){throw console.log("ATS Assets Service: catch search request error"),t.searchRequestState.next({status:V.a.ERROR,response:"",error:e}),t.searchResponse.next({header:{status:200,message:"error",chatter:"error",timestamp:"timestamp"},payload:{}}),"ATS Assets Service: error searching Viewfinder"}),Object(L.a)(function(e){t.searchRequestState.next({status:V.a.SUCCESS,response:"success",error:""}),console.log("ATS Assets Service: success searching Viewfinder")})).subscribe(function(e){t.searchResponse.next(e),t.assetsList.next(e.payload.documents)})}}]),t}()).\u0275fac=function(e){return new(e||c)(O.Xb(U.a),O.Xb(G.a))},c.\u0275prov=O.Jb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),K=[{path:"assets/search",component:(o=function(){function t(s,n){var r=this;e(this,t),this.assetsService=s,this.dialog=n,this.CloseIcon=R.i,this.FalseIcon=T.a,this.MaybeIcon=R.a,this.TrueIcon=R.e,this.angleUpIcon=R.c,this.angleDownIcon=R.b,this.beginningIcon=R.f,this.backwardIcon=R.d,this.forwardIcon=R.h,this.endIcon=R.g,this.displayedColumns$=new N.a(["assetID","status","manufacturer","modelName","modelID","location","program","project","poDate","serial","assignedTo","note","position","employee"]),this.isAssignedFilterFormControl=new v.c,this.statusFilterFormControl=new v.c,this.modelNameFilterFormControl=new v.c,this.programFilterFormControl=new v.c,this.locationNameFilterFormControl=new v.c,this.assetIDSearchFormControl=new v.c,this.anyFieldSearchFormControl=new v.c,this.currentIsAssignedFilter=new N.a(""),this.currentStatusFilter=new N.a(""),this.currentModelNameFilter=new N.a(""),this.currentProgramFilter=new N.a(""),this.currentLocationNameFilter=new N.a(""),this.currentAssetIDSearch=new N.a(""),this.currentAnyFieldSearch=new N.a(""),this.currentSearch=new N.a("*"),this.currentPage=new N.a(1),this.pageSize=new N.a(20),this.maxPage=new N.a(1),this.searchResponse$=this.assetsService.searchResponse$,this.totalRecords$=this.searchResponse$.pipe(Object(j.a)(function(e){return e.payload.count})),this.assetsPage$=this.assetsService.assetsList$,this.maxPage$=this.totalRecords$.pipe(Object(j.a)(function(e){return Math.ceil(e/r.pageSize.value)})),this.maxPage$.subscribe(this.maxPage),this.assetSelected$=this.assetsService.assetSelected$,this.selectedAsset$=this.assetsService.selectedAsset$}return s(t,[{key:"ngOnInit",value:function(){this.searchAssets()}},{key:"ngAfterViewInit",value:function(){var e=this;this.isAssignedFilterFormControl.valueChanges.subscribe(function(t){console.log("isAssigned Filter: ".concat(t)),e.currentIsAssignedFilter.next(t),e.searchAssets()}),this.statusFilterFormControl.valueChanges.subscribe(function(t){console.log("status Filter ".concat(t)),e.currentStatusFilter.next(t),e.searchAssets()}),this.modelNameFilterFormControl.valueChanges.subscribe(function(t){console.log("modelName Filter ".concat(t)),e.currentModelNameFilter.next(t),e.searchAssets()}),this.programFilterFormControl.valueChanges.subscribe(function(t){console.log("program Filter: ".concat(t)),e.currentProgramFilter.next(t),e.searchAssets()}),this.locationNameFilterFormControl.valueChanges.subscribe(function(t){console.log("locationName Filter: ".concat(t)),e.currentLocationNameFilter.next(t),e.currentPage.next(1),e.searchAssets()}),this.assetIDSearchFormControl.valueChanges.pipe(Object(D.a)(400),Object(q.a)()).subscribe(function(t){console.log("assetID Search: ".concat(t)),e.currentAssetIDSearch.next(t),e.currentPage.next(1),e.searchAssets()}),this.anyFieldSearchFormControl.valueChanges.pipe(Object(D.a)(400),Object(q.a)()).subscribe(function(t){console.log("searchTerm Search: ".concat(t)),e.currentAnyFieldSearch.next(t),e.currentPage.next(1),e.searchAssets()})}},{key:"pageBeginning",value:function(){this.currentPage.next(1),this.searchAssets()}},{key:"pageUp",value:function(){var e=this.currentPage.value-1;this.nextPageValid(e)&&(this.currentPage.next(e),this.searchAssets())}},{key:"pageDown",value:function(){var e=this.currentPage.value+1;this.nextPageValid(e)&&(this.currentPage.next(e),this.searchAssets())}},{key:"pageEnd",value:function(){this.currentPage.next(this.maxPage.value),this.searchAssets()}},{key:"nextPageValid",value:function(e){return e>=1&&e<=this.maxPage.value}},{key:"selectAsset",value:function(e){console.log("Show details for ".concat(e)),this.assetsService.selectAsset(e),this.assetDetailDialogRef=this.dialog.open($,{width:"800px"})}},{key:"deselectAsset",value:function(){console.log("Deselect selected asset"),this.assetsService.deselectAsset()}},{key:"searchAssets",value:function(){var e="",t="*";this.currentIsAssignedFilter.value.length>0&&"all"!==this.currentIsAssignedFilter.value&&(e+="isAssigned eq ".concat(this.currentIsAssignedFilter.value)),this.currentStatusFilter.value.length>0&&"all"!==this.currentStatusFilter.value&&(e.length>0&&(e+=" and "),e+="status eq ".concat(this.currentStatusFilter.value)),this.currentModelNameFilter.value.length>0&&"all"!==this.currentModelNameFilter.value&&(e.length>0&&(e+=" and "),e+="modelName eq ".concat(this.currentModelNameFilter.value)),this.currentProgramFilter.value.length>0&&"all"!==this.currentProgramFilter.value&&(e.length>0&&(e+=" and "),e+="program eq ".concat(this.currentProgramFilter.value)),this.currentLocationNameFilter.value.length>0&&"all"!==this.currentLocationNameFilter.value&&(e.length>0&&(e+=" and "),e+="locationName eq '".concat(this.currentLocationNameFilter.value,"'")),this.currentAssetIDSearch.value.length>0&&(t=this.currentAssetIDSearch.value),this.currentAnyFieldSearch.value.length>0&&(t=this.currentAnyFieldSearch.value);var s={search:t,skip:(this.currentPage.value-1)*this.pageSize.value};e.length>0&&(s.filter=e),console.log(s),this.assetsService.searchAssets(s)}}]),t}(),o.\u0275fac=function(e){return new(e||o)(O.Nb(H),O.Nb(b.a))},o.\u0275cmp=O.Hb({type:o,selectors:[["cosmos-ats-assets-search"]],decls:3,vars:0,template:function(e,t){1&e&&(O.Tb(0,"h1"),O.vc(1,"Search ATS Assets"),O.Sb(),O.vc(2," Asset ID\nStatus\nSigned Out for Learn from Home\nReturned from Learn from Home\nManufacturer\nModel Name\nModel ID\nLocation\nProgram\nProject\nPO Date\nSerial\nAssigned To\nNote\nPosition\nEmployee "))},styles:[""]}),o),data:{roles:["cosmos-superuser","cosmos-user-its"]},canActivate:[g.d,P.a]},{path:"",component:k,data:{roles:["cosmos-superuser","cosmos-user-its"]},canActivate:[g.d,P.a]}],z=((u=function t(){e(this,t)}).\u0275mod=O.Lb({type:u}),u.\u0275inj=O.Kb({factory:function(e){return new(e||u)},imports:[[C.e.forChild(K)],C.e]}),u),J=((l=function t(){e(this,t)}).\u0275mod=O.Lb({type:l}),l.\u0275inj=O.Kb({factory:function(e){return new(e||l)},providers:[{provide:d.a,useClass:g.e,multi:!0}],imports:[[h.c,m.r,v.f,v.l,f.b,p.b,S.a,b.e,A.b,F.a,w.a,y.a,x.c,I.b,z]]}),l)}}])}();